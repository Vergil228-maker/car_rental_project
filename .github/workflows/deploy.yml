name: üöÄ Deploy to PyPI

on:
  release:
    types: [published]  # —Ç—Ä–∏–≥–≥–µ—Ä –ø—Ä–∏ –≤—ã–ø—É—Å–∫–µ —Ä–µ–ª–∏–∑–∞

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    - name: üì• –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
      uses: actions/checkout@v3

    - name: üêç –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Python
      uses: actions/setup-python@v4
      with:
        python-version: "3.11"

    - name: ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å build –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
      run: |
        python -m pip install --upgrade pip build twine

    - name: üèóÔ∏è –°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
      run: python -m build

    - name: üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞ PyPI
      env:
        TWINE_USERNAME: __token__
        TWINE_PASSWORD: ${{ secrets.PYPI_API_TOKEN }}
      run: twine upload dist/*
