name: Python CI - Car Rental Project

on:
  push:
    branches: [ "main" ]  # –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ push –≤ –≤–µ—Ç–∫—É main
  pull_request:
    branches: [ "main" ]  # –∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ pull request –≤ main

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
    - name: üì• –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
      uses: actions/checkout@v3

    - name: üêç –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'  # –∏–ª–∏ 3.13, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –∏–º–µ–Ω–Ω–æ –µ—ë

    - name: ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
      run: |
        python -m pip install --upgrade pip
        pip install pytest pytest-cov

    - name: üß™ –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
      run: |
        pytest --cov=car_rental --cov-report=term
